# Chrome Audio Device Isolation - WirePlumber 0.5+ Format
# Hides helper devices and hardware from Chrome
# Chrome should only see: intercom-speaker and output.intercom-microphone

monitor.alsa.rules = [
  {
    # Hide helper sink from Chrome speaker dropdown
    matches = [
      { node.name = "intercom-mic-sink" }
    ]
    actions = {
      update-props = {
        node.disabled = true
      }
    }
  },
  {
    # Hide monitor sources from Chrome microphone dropdown
    matches = [
      { node.name = "intercom-speaker.monitor" }
    ]
    actions = {
      update-props = {
        node.disabled = true
      }
    }
  },
  {
    matches = [
      { node.name = "intercom-mic-sink.monitor" }
    ]
    actions = {
      update-props = {
        node.disabled = true
      }
    }
  },
  {
    # Hide USB audio source (should route through virtual device)
    matches = [
      { node.name = "usb_audio_source" }
    ]
    actions = {
      update-props = {
        node.disabled = true
      }
    }
  }
]