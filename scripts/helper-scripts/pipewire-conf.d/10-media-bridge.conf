# Media Bridge PipeWire Configuration
# Low latency settings for intercom and display

context.properties = {
    # Low latency configuration
    default.clock.rate = 48000
    default.clock.quantum = 256      # ~5.3ms latency at 48kHz (normal operation)
    default.clock.min-quantum = 32   # ~0.67ms minimum (for self-monitoring)
    default.clock.max-quantum = 512  # ~10.6ms maximum
    
    # Memory locking for real-time performance
    mem.allow-mlock = true
    mem.warn-mlock = false
    
    # Link settings for low latency
    link.max-buffers = 16
}

# Override RT settings for low latency
context.modules = [
    {
        name = libpipewire-module-rt
        args = {
            nice.level = -11
            rt.prio = 88
            rt.time.soft = 200000
            rt.time.hard = 200000
        }
        flags = [ ifexists nofail ]
    }
]