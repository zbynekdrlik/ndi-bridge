# Virtual Intercom Devices Configuration - Fixed version using only loopback
# Uses only existing PipeWire modules (no virtual-source which doesn't exist)
context.modules = [
    {
        name = libpipewire-module-loopback
        args = {
            node.description = "Intercom Speaker"
            capture.props = {
                node.name = "intercom-speaker"
                media.class = "Audio/Sink"
                audio.channels = 2
                audio.position = [ FL FR ]
            }
            playback.props = {
                node.name = "intercom-speaker.output"
                media.class = "Audio/Source/Virtual"
                audio.channels = 2
                audio.position = [ FL FR ]
            }
        }
    },
    {
        name = libpipewire-module-loopback
        args = {
            node.description = "Intercom Microphone"
            capture.props = {
                node.name = "intercom-microphone.input"
                media.class = "Audio/Sink/Virtual"
                audio.channels = 2
                audio.position = [ FL FR ]
            }
            playback.props = {
                node.name = "intercom-microphone"
                media.class = "Audio/Source"
                audio.channels = 2
                audio.position = [ FL FR ]
            }
        }
    }
]