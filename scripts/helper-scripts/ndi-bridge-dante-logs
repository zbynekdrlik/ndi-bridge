#!/bin/bash
# View Dante audio bridge logs

echo "================================"
echo "    Dante Audio Bridge Logs     "
echo "================================"
echo

# Check if service exists
if ! systemctl list-units --all | grep -q dante-bridge.service; then
    echo "Dante bridge service not found"
    exit 1
fi

# Show service status first
echo "Service Status:"
systemctl status dante-bridge.service --no-pager | head -10
echo
echo "--------------------------------"
echo "Recent Log Entries:"
echo "--------------------------------"
echo

# Show logs with follow option if requested
if [ "$1" = "-f" ] || [ "$1" = "--follow" ]; then
    echo "Following logs (Ctrl+C to exit)..."
    journalctl -u dante-bridge.service -f
else
    # Show last 50 lines by default
    journalctl -u dante-bridge.service -n ${1:-50} --no-pager
    echo
    echo "Tip: Use 'ndi-bridge-dante-logs -f' to follow logs in real-time"
    echo "     Use 'ndi-bridge-dante-logs 100' to see last 100 lines"
fi