#!/bin/bash
# Show NDI Bridge welcome screen
clear
echo -e "\033[1;32m"
echo "╔═══════════════════════════════════════════════════════════════╗"
echo "║                      NDI Bridge System                        ║"
echo "╚═══════════════════════════════════════════════════════════════╝"
echo -e "\033[0m"
echo -e "\033[1;36mSystem Information:\033[0m"
echo "  Hostname:   $(hostname)"
IP_ADDR=$(ip -4 addr show dev br0 2>/dev/null | awk '/inet/ {print $2}' | cut -d/ -f1 | head -1)
if [ -z "$IP_ADDR" ]; then
    echo -e "  IP Address: \033[1;33mWaiting for DHCP...\033[0m"
else
    echo "  IP Address: $IP_ADDR"
fi
echo "  Uptime:     $(uptime -p)"
echo ""
echo -e "\033[1;36mSoftware Versions:\033[0m"
echo "  NDI-Bridge: $(/opt/ndi-bridge/ndi-bridge --version 2>&1 | head -1 | awk '{for(i=1;i<=NF;i++) if($i ~ /[0-9]+\.[0-9]+\.[0-9]+/) print $i}' || echo 'Unknown')"
echo "  Build Script: $(cat /etc/ndi-bridge/build-script-version 2>/dev/null || echo 'Unknown')"
echo ""
echo -e "\033[1;36mNetwork Configuration:\033[0m"
echo "  • Both ethernet ports are bridged (br0)"
echo "  • Connect cable to either port"
echo "  • Chain devices through second port"
echo ""
echo -e "\033[1;36mAvailable Commands:\033[0m"
echo -e "  \033[1;33mndi-bridge-info\033[0m         - Display system status"
echo -e "  \033[1;33mndi-bridge-set-name\033[0m     - Set device name (hostname & NDI)"
echo -e "  \033[1;33mndi-bridge-update\033[0m       - Update NDI binary"
echo -e "  \033[1;33mndi-bridge-logs\033[0m         - View NDI logs"
echo -e "  \033[1;33mndi-bridge-netstat\033[0m      - Network bridge status"
echo -e "  \033[1;33mndi-bridge-netmon\033[0m       - Network bandwidth monitor"
echo -e "  \033[1;33mndi-bridge-help\033[0m         - Show all commands"
echo ""
echo -e "\033[1;36mConsole Switching:\033[0m"
echo "  • TTY1 (Alt+F1) - Live NDI logs"
echo "  • TTY2 (Alt+F2) - This menu"
echo "  • TTY3-6 (Alt+F3-F6) - Additional terminals"
echo ""
echo -e "\033[1;32mNDI Service:\033[0m"
systemctl is-active ndi-bridge >/dev/null 2>&1 && echo -e "  Status: \033[1;32m●\033[0m Running" || echo -e "  Status: \033[1;31m●\033[0m Stopped"
echo ""