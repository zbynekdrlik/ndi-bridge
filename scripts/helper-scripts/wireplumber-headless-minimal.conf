# Minimal WirePlumber configuration for headless operation
# No D-Bus, no Bluetooth, just basic device management and access control

wireplumber.profiles = {
  main = {
    monitor.alsa = disabled
    monitor.alsa.rules = disabled
    monitor.bluez = disabled
    monitor.bluez.rules = disabled
  }
}

wireplumber.settings = {
  # Disable all D-Bus related features
  support.dbus = false
  monitor.bluez = disabled
  monitor.bluez5 = disabled
  
  # Use static configuration only
  use-flatpak-portal = false
  use-portal-access = false
  
  # Enable basic features only
  enable-metadata = true
  enable-session-manager = true
}

# Disable Bluetooth completely
monitor.bluez.properties = {
  enabled = false
}

# Load only essential modules
wireplumber.components = [
  {
    name = libwireplumber-module-default-nodes
    type = module
    provides = default-nodes
  }
  {
    name = libwireplumber-module-mixer-api
    type = module
    provides = mixer-api
  }
  {
    name = libwireplumber-module-lua-scripting
    type = module
    provides = lua-scripting
  }
]