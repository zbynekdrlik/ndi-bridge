#!/bin/bash

# Show intercom service logs
echo "NDI Bridge Intercom Logs"
echo "========================"
echo ""

# Check if service exists
if ! systemctl list-unit-files 2>/dev/null | grep -q ndi-bridge-intercom; then
    echo "Error: Intercom service not installed"
    exit 1
fi

# Show logs with follow option if requested
if [ "$1" = "-f" ] || [ "$1" = "--follow" ]; then
    echo "Following logs (Ctrl+C to stop)..."
    journalctl -u ndi-bridge-intercom -f
else
    # Show last 50 lines by default
    journalctl -u ndi-bridge-intercom -n ${1:-50} --no-pager
    echo ""
    echo "Tip: Use '$0 -f' to follow logs in real-time"
    echo "     Use '$0 100' to see last 100 lines"
fi