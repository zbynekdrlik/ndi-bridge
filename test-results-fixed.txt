============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
metadata: {'Python': '3.12.3', 'Platform': 'Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.2', 'pluggy': '1.6.0'}, 'Plugins': {'json-report': '1.5.0', 'rerunfailures': '14.0', 'testinfra': '10.1.0', 'html': '4.1.1', 'cov': '5.0.0', 'timeout': '2.3.1', 'xdist': '3.6.1', 'metadata': '3.1.1', 'clarity': '1.0.1'}}
rootdir: /home/newlevel/devel/ndi-bridge/tests
configfile: pytest.ini
plugins: json-report-1.5.0, rerunfailures-14.0, testinfra-10.1.0, html-4.1.1, cov-5.0.0, timeout-2.3.1, xdist-3.6.1, metadata-3.1.1, clarity-1.0.1
timeout: 10.0s
timeout method: signal
timeout func_only: False
collecting ... collected 373 items

tests/component/audio/test_audio_system.py::test_alsa_utils_installed PASSED
tests/component/audio/test_audio_system.py::test_alsa_devices_detected PASSED
tests/component/audio/test_audio_system.py::test_alsa_playback_device_exists PASSED
tests/component/audio/test_audio_system.py::test_alsa_default_device_configured PASSED
tests/component/audio/test_audio_system.py::test_alsa_state_file_exists PASSED
tests/component/audio/test_audio_system.py::test_proc_asound_exists PASSED
tests/component/audio/test_audio_system.py::test_proc_asound_cards_populated PASSED
tests/component/audio/test_audio_system.py::test_sound_modules_loaded PASSED
tests/component/audio/test_audio_system.py::test_alsa_mixer_accessible PASSED
tests/component/audio/test_audio_system.py::test_pipewire_installed PASSED
tests/component/audio/test_audio_system.py::test_pipewire_service_running PASSED
tests/component/audio/test_audio_system.py::test_pipewire_pulse_service_running PASSED
tests/component/audio/test_audio_system.py::test_wireplumber_service_running PASSED
tests/component/audio/test_audio_system.py::test_pipewire_audio_working PASSED
tests/component/audio/test_audio_system.py::test_pulseaudio_installed PASSED
tests/component/audio/test_audio_system.py::test_audio_device_permissions PASSED
tests/component/audio/test_audio_system.py::test_speaker_test_available PASSED
tests/component/audio/test_audio_system.py::test_speaker_test_runs PASSED
tests/component/audio/test_audio_system.py::test_hdmi_audio_devices_detected PASSED
tests/component/audio/test_audio_system.py::test_pipewire_hdmi_sink_available PASSED
tests/component/audio/test_unified_pipewire.py::test_pipewire_system_service_exists PASSED
tests/component/audio/test_unified_pipewire.py::test_pipewire_pulse_system_service_exists PASSED
tests/component/audio/test_unified_pipewire.py::test_wireplumber_system_service_exists PASSED
tests/component/audio/test_unified_pipewire.py::test_pipewire_system_service_running PASSED
tests/component/audio/test_unified_pipewire.py::test_single_pipewire_instance PASSED
tests/component/audio/test_unified_pipewire.py::test_no_user_pipewire_instances PASSED
tests/component/audio/test_unified_pipewire.py::test_xdg_runtime_dir_configured PASSED
tests/component/audio/test_unified_pipewire.py::test_pulse_socket_exists PASSED
tests/component/audio/test_unified_pipewire.py::test_audio_manager_installed PASSED
tests/component/audio/test_unified_pipewire.py::test_virtual_audio_devices_configured PASSED
tests/component/audio/test_unified_pipewire.py::test_wireplumber_config_installed PASSED
tests/component/audio/test_unified_pipewire.py::test_low_latency_config_present PASSED
tests/component/audio/test_unified_pipewire.py::test_intercom_service_depends_on_pipewire PASSED
tests/component/audio/test_unified_pipewire.py::test_pipewire_realtime_priority PASSED
tests/component/audio/test_unified_pipewire.py::test_intercom_uses_system_pipewire PASSED
tests/component/audio/test_unified_pipewire.py::test_virtual_audio_device_creation PASSED
tests/component/audio/test_unified_pipewire.py::test_usb_audio_not_exposed_directly PASSED
tests/component/audio/test_unified_pipewire.py::test_hdmi_audio_separate_from_usb PASSED
tests/component/audio/test_vdo_intercom.py::test_chrome_or_chromium_installed PASSED
tests/component/audio/test_vdo_intercom.py::test_chrome_executable PASSED
tests/component/audio/test_vdo_intercom.py::test_vdo_ninja_intercom_script_exists PASSED
tests/component/audio/test_vdo_intercom.py::test_vdo_ninja_intercom_service_exists PASSED
tests/component/audio/test_vdo_intercom.py::test_pipewire_for_audio_routing PASSED
tests/component/audio/test_vdo_intercom.py::test_pipewire_service_running PASSED
tests/component/audio/test_vdo_intercom.py::test_wireplumber_installed PASSED
tests/component/audio/test_vdo_intercom.py::test_pipewire_pulse_compatibility PASSED
tests/component/audio/test_vdo_intercom.py::test_usb_audio_device_detected PASSED
tests/component/audio/test_vdo_intercom.py::test_chrome_data_directory_configured PASSED
tests/component/audio/test_vdo_intercom.py::test_chrome_flags_configured PASSED
tests/component/audio/test_vdo_intercom.py::test_vdo_ninja_url_configured PASSED
tests/component/audio/test_vdo_intercom.py::test_audio_permissions_for_chrome PASSED
tests/component/audio/test_vdo_intercom.py::test_intercom_volume_control_script PASSED
tests/component/audio/test_vdo_intercom.py::test_intercom_restart_capability PASSED
tests/component/capture/test_device_detection.py::test_capture_device_exists <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/capture/test_device_detection.py PASSED
tests/component/capture/test_device_detection.py::test_capture_device_is_character_device <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/capture/test_device_detection.py PASSED
tests/component/capture/test_device_detection.py::test_capture_device_has_correct_permissions <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/capture/test_device_detection.py PASSED
tests/component/capture/test_device_detection.py::test_capture_device_owned_by_video_group <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/capture/test_device_detection.py PASSED
tests/component/capture/test_device_detection.py::test_usb_capture_device_connected <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/capture/test_device_detection.py PASSED
tests/component/capture/test_fps_monitoring.py::test_fps_file_exists PASSED
tests/component/capture/test_fps_monitoring.py::test_fps_value_is_numeric PASSED
tests/component/capture/test_fps_monitoring.py::test_fps_within_acceptable_range PASSED
tests/component/capture/test_fps_monitoring.py::test_frames_captured_increasing PASSED
tests/component/capture/test_fps_monitoring.py::test_dropped_frames_file_exists PASSED
tests/component/capture/test_fps_monitoring.py::test_dropped_frames_percentage_low PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_service_exists PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_service_enabled PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_service_running PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_process_exists PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_binary_exists PASSED
tests/component/capture/test_service_status.py::test_ndi_capture_service_active_state PASSED
tests/component/capture/test_stabilization.py::test_initial_state_is_starting FAILED
tests/component/capture/test_stabilization.py::test_stabilization_complete_file_created PASSED
tests/component/capture/test_stabilization.py::test_state_transitions_to_capturing PASSED
tests/component/capture/test_stabilization.py::test_dropped_frames_tracked PASSED
tests/component/capture/test_stabilization.py::test_capture_start_time_recorded PASSED
tests/component/core/test_core_services.py::test_systemd_is_running PASSED
tests/component/core/test_core_services.py::test_ssh_service_enabled PASSED
tests/component/core/test_core_services.py::test_ssh_service_running PASSED
tests/component/core/test_core_services.py::test_nginx_service_enabled PASSED
tests/component/core/test_core_services.py::test_nginx_service_running PASSED
tests/component/core/test_core_services.py::test_nginx_listening_on_port_80 PASSED
tests/component/core/test_core_services.py::test_ndi_capture_service_enabled PASSED
tests/component/core/test_core_services.py::test_ndi_capture_service_running PASSED
tests/component/core/test_core_services.py::test_systemd_networkd_enabled PASSED
tests/component/core/test_core_services.py::test_systemd_networkd_running PASSED
tests/component/core/test_core_services.py::test_systemd_resolved_enabled PASSED
tests/component/core/test_core_services.py::test_systemd_resolved_running PASSED
tests/component/display/test_display_capability.py::test_drm_device_exists PASSED
tests/component/display/test_display_capability.py::test_drm_device_is_character PASSED
tests/component/display/test_display_capability.py::test_ndi_display_binary_exists PASSED
tests/component/display/test_display_capability.py::test_ndi_display_binary_executable PASSED
tests/component/display/test_display_capability.py::test_display_service_template_exists PASSED
tests/component/display/test_display_capability.py::test_display_runtime_directory_exists PASSED
tests/component/display/test_display_capability.py::test_display_runtime_directory_is_directory PASSED
tests/component/display/test_display_capability.py::test_kms_available PASSED
tests/component/display/test_display_capability.py::test_display_connectors_detected PASSED
tests/component/display/test_display_capability.py::test_edid_readable PASSED
tests/component/display/test_display_capability.py::test_display_resolution_detected PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_display_0_audio_profile PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_display_1_audio_profile PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_display_2_audio_profile PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_card_detected PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_devices_in_alsa PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_pcm_devices PASSED
tests/component/display/test_hdmi_audio_routing.py::test_drm_audio_capability_hdmi_a_1 PASSED
tests/component/display/test_hdmi_audio_routing.py::test_drm_audio_capability_hdmi_a_2 PASSED
tests/component/display/test_hdmi_audio_routing.py::test_drm_audio_capability_hdmi_a_3 PASSED
tests/component/display/test_hdmi_audio_routing.py::test_pipewire_can_switch_hdmi_ports PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_eld_readable PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_connection_status PASSED
tests/component/display/test_hdmi_audio_routing.py::test_pipewire_hdmi_sink_naming PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_formats_supported PASSED
tests/component/display/test_hdmi_audio_routing.py::test_intel_audio_controller PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_kernel_driver PASSED
tests/component/display/test_hdmi_audio_routing.py::test_pipewire_hdmi_profile_switching PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_audio_mixer_controls PASSED
tests/component/display/test_hdmi_audio_routing.py::test_pipewire_default_hdmi_routing PASSED
tests/component/display/test_hdmi_audio_routing.py::test_hdmi_display_audio_state_files PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_script_exists PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_script_executable PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_script_sets_100_percent PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_sink_volume_default PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_set_command_works PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_display_launcher_calls_audio_setup PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_display_service_template_uses_launcher PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_100_after_display_start PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_audio_setup_script_hdmi_detection PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_pipewire_hdmi_sink_enumeration PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_persistence_check PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_audio_100_percent_in_launcher PASSED
tests/component/display/test_hdmi_volume_100_percent.py::test_hdmi_volume_functional_with_stream PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_system_service_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_system_service_enabled PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_system_service_running PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_pulse_system_service_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_pulse_system_service_enabled PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_pulse_system_service_running PASSED
tests/component/display/test_ndi_display_pipewire.py::test_wireplumber_system_service_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_wireplumber_system_service_enabled PASSED
tests/component/display/test_ndi_display_pipewire.py::test_wireplumber_system_service_running PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_runtime_directory_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_socket_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_pulse_socket_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_config_for_low_latency PASSED
tests/component/display/test_ndi_display_pipewire.py::test_hdmi_audio_sink_available PASSED
tests/component/display/test_ndi_display_pipewire.py::test_hdmi_audio_sink_card0 PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_can_list_nodes PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_audio_latency_config PASSED
tests/component/display/test_ndi_display_pipewire.py::test_ndi_display_links_pipewire PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_hdmi_port_0_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_hdmi_port_1_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_hdmi_port_2_exists PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_default_sink_configured PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_sample_rate_48khz PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_buffer_size_256 PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_hdmi_audio_routing_ready PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_multiple_hdmi_ports_detected PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_permissions_for_system_audio PASSED
tests/component/display/test_ndi_display_pipewire.py::test_pipewire_alsa_plugin_installed PASSED
tests/component/display/test_ndi_display_service.py::test_ndi_display_service_template_valid PASSED
tests/component/display/test_ndi_display_service.py::test_ndi_display_instance_can_start PASSED
tests/component/display/test_ndi_display_service.py::test_ndi_find_command_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_status_directory_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_assignment_script_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_list_script_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_status_script_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_remove_script_exists PASSED
tests/component/display/test_ndi_display_service.py::test_display_output_connected PASSED
tests/component/display/test_ndi_display_service.py::test_display_edid_readable PASSED
tests/component/display/test_ndi_display_service.py::test_display_modes_available PASSED
tests/component/display/test_ndi_display_service.py::test_framebuffer_device_exists PASSED
tests/component/display/test_ndi_display_service.py::test_tty_allocation_for_display PASSED
tests/component/display/test_ndi_display_service.py::test_display_service_cleanup_on_stop PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_info_script_exists PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_info_script_executable PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_info_runs_successfully PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_logs_script_exists PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_logs_script_executable PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_set_name_script_exists PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_restart_script_exists SKIPPED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_welcome_script_exists PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_collector_script_exists PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_collector_service_enabled PASSED
tests/component/helpers/test_helper_scripts.py::test_ndi_bridge_collector_service_running PASSED
tests/component/helpers/test_helper_scripts.py::test_helper_scripts_in_path PASSED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_intercom_service_basics PASSED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_set_name_script_basics PASSED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_chrome_process_running PASSED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_intercom_restart_on_rename_simulation +++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
~~~~~~~~~~~~~~~ Stack of Thread-1 (run_server) (123364100982464) ~~~~~~~~~~~~~~~
  File "/usr/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
  File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
  File "/home/newlevel/.local/lib/python3.12/site-packages/pytest_rerunfailures.py", line 433, in run_server
    conn, _ = self.sock.accept()
  File "/usr/lib/python3.12/socket.py", line 295, in accept
    fd, addr = self._accept()
+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
FAILED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_full_rename_flow FAILED
tests/component/helpers/test_intercom_rename_comprehensive.py::TestIntercomRenameComprehensive::test_intercom_survives_reboot PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_usb_audio_device_present PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_csctek_usb_audio_detected PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_pipewire_sees_usb_audio PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_control_get_volumes PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_control_set_mic_volume PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_control_set_speaker_volume PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_control_mute_unmute_mic PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_monitor_control PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_monitor_latency PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_pipewire_quantum_adjustment PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_device_exclusive_access PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_pipewire_modules_loaded PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_levels_readable PASSED
tests/component/intercom/test_intercom_audio.py::TestIntercomAudio::test_audio_device_reconnection_handling PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_directory_exists PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_save_command_exists PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_save_and_load PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_file_format PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_default_values PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_save_requires_writable_filesystem PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_backup_functionality PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_validation PASSED
tests/component/intercom/test_intercom_config.py::TestIntercomConfig::test_config_permissions PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_service_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_service_enabled PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_service_running PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_service_configuration PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_launcher_script_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_pipewire_script_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_control_script_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_config_script_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_monitor_script_exists PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_helper_scripts_exist PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_status_command PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_control_get_status PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_intercom_service_restart PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_chrome_installed PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_pipewire_installed PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_wireplumber_installed PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_xvfb_installed PASSED
tests/component/intercom/test_intercom_core.py::TestIntercomCore::test_x11vnc_installed PASSED
tests/component/intercom/test_intercom_integration.py::TestIntercomIntegration::test_service_restart_recovery PASSED
tests/component/intercom/test_intercom_integration.py::TestIntercomIntegration::test_vnc_remote_access PASSED
tests/component/intercom/test_intercom_integration.py::TestIntercomIntegration::test_vdo_ninja_connection PASSED
tests/component/intercom/test_intercom_integration.py::TestIntercomIntegration::test_usb_audio_integration PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_script_exists PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_script_has_latency_configuration PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_enable_command PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_disable_command PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_status_command PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_quantum_adjustment PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_loopback_module_loaded PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_latency_calculation PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_audio_routing PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_cpu_usage_claim PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_enable_disable_cycle +++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
~~~~~~~~~~~~~~~ Stack of Thread-1 (run_server) (123364100982464) ~~~~~~~~~~~~~~~
  File "/usr/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
  File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
  File "/home/newlevel/.local/lib/python3.12/site-packages/pytest_rerunfailures.py", line 433, in run_server
    conn, _ = self.sock.accept()
  File "/usr/lib/python3.12/socket.py", line 295, in accept
    fd, addr = self._accept()
+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
FAILED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_volume_control PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_survives_intercom_restart PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_requires_usb_audio PASSED
tests/component/intercom/test_intercom_monitor_latency.py::TestIntercomMonitorLatency::test_monitor_pipewire_requirement PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_process_running PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_vdo_ninja_parameters PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_xvfb_process_running PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_x11vnc_process_running PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_pipewire_process_running PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_wireplumber_process_running PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_vnc_port_listening PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_display_environment_set PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_using_correct_display PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_profile_directory PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_restart_recovery PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_process_resource_usage PASSED
tests/component/intercom/test_intercom_processes.py::TestIntercomProcesses::test_chrome_push_parameter_matches_hostname PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_service_exists PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_nginx_intercom_config_exists PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_interface_accessible PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_api_status_endpoint PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_api_mute_endpoint PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_api_volume_endpoint PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_websocket_endpoint_exists PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_interface_responsive_design PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_api_cors_headers PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_fastapi_running PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_static_files_served PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_web_security_headers PASSED
tests/component/intercom/test_intercom_web.py::TestIntercomWeb::test_api_authentication PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_get_current_status PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_set_volume_through_endpoint PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_mute_unmute_control PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_monitor_control PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_interface_loads_successfully PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_concurrent_requests PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_invalid_input_handling PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_response_times PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_control_integration_workflow PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_cors_for_cross_origin PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_authentication_if_enabled PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_websocket_connection PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_api_error_messages PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_control_device_state_sync PASSED
tests/component/intercom/test_intercom_web_control.py::TestIntercomWebControl::test_web_control_persistence PASSED
tests/component/network/test_dhcp_client.py::test_dhcp_client_service_enabled <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_dhcp_client_service_running <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_primary_interface_has_ip <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_ip_address_is_valid <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_default_gateway_configured <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_dns_resolver_configured <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_dhcp_client.py::test_network_connectivity <- ../../../../../mnt/c/Users/newlevel/Documents/GitHub/ndi-bridge/tests/component/network/test_dhcp_client.py PASSED
tests/component/network/test_mac_persistence.py::test_mac_address_file_exists PASSED
tests/component/network/test_mac_persistence.py::test_primary_interface_has_mac PASSED
tests/component/network/test_mac_persistence.py::test_mac_address_format_valid PASSED
tests/component/network/test_mac_persistence.py::test_mac_address_not_default SKIPPED
tests/component/network/test_mac_persistence.py::test_mac_address_locally_administered PASSED
tests/component/network/test_mac_persistence.py::test_bridge_interface_exists PASSED
tests/component/network/test_mac_persistence.py::test_mac_generation_script_exists PASSED
tests/component/network/test_mac_persistence.py::test_systemd_link_file_exists PASSED
tests/component/network/test_mac_persistence.py::test_mac_matches_hostname_hash PASSED
tests/component/timesync/test_time_synchronization.py::test_systemd_timesyncd_installed PASSED
tests/component/timesync/test_time_synchronization.py::test_systemd_timesyncd_enabled PASSED
tests/component/timesync/test_time_synchronization.py::test_systemd_timesyncd_running FAILED
tests/component/timesync/test_time_synchronization.py::test_timedatectl_command_works PASSED
tests/component/timesync/test_time_synchronization.py::test_ntp_synchronized PASSED
tests/component/timesync/test_time_synchronization.py::test_time_zone_set PASSED
tests/component/timesync/test_time_synchronization.py::test_rtc_available PASSED
tests/component/timesync/test_time_synchronization.py::test_ptp4l_installed PASSED
tests/component/timesync/test_time_synchronization.py::test_ptp_service_exists PASSED
tests/component/timesync/test_time_synchronization.py::test_chrony_installed PASSED
tests/component/timesync/test_time_synchronization.py::test_ntp_servers_configured PASSED
tests/component/timesync/test_time_synchronization.py::test_time_sync_coordinator_installed PASSED
tests/component/timesync/test_time_synchronization.py::test_time_sync_coordinator_service_exists PASSED
tests/component/timesync/test_time_synchronization.py::test_system_time_reasonable PASSED
tests/component/timesync/test_time_synchronization.py::test_time_drift_file_exists PASSED
tests/component/web/test_web_interface.py::test_web_server_responds_to_http PASSED
tests/component/web/test_web_interface.py::test_web_interface_index_exists PASSED
tests/component/web/test_web_interface.py::test_api_endpoint_info_responds PASSED
tests/component/web/test_web_interface.py::test_web_terminal_wetty_installed PASSED
tests/component/web/test_web_interface.py::test_web_authentication_configured PASSED
tests/component/web/test_web_interface.py::test_nginx_config_syntax_valid PASSED
tests/component/web/test_web_interface.py::test_web_root_directory_exists PASSED
tests/component/web/test_web_interface.py::test_nginx_error_log_exists PASSED
tests/component/web/test_web_interface.py::test_nginx_access_log_exists PASSED
tests/component/web/test_web_interface.py::test_web_interface_javascript_files PASSED
tests/integration/test_capture_to_ndi.py::test_capture_to_ndi_pipeline_active PASSED
tests/integration/test_capture_to_ndi.py::test_ndi_stream_discoverable PASSED
tests/integration/test_capture_to_ndi.py::test_capture_metadata_in_stream PASSED
tests/integration/test_display_functional.py::test_display_stream_playback_with_audio 
============================================================
FUNCTIONAL DISPLAY TEST - YOU SHOULD SEE AND HEAR OUTPUT
============================================================
Finding available NDI streams...
Using stream: RESOLUME-SNV (cg-obs)
Monitor connected to: card1-HDMI-A-1 (display 0)
Preparing display 0...
Starting NDI display with stream: RESOLUME-SNV (cg-obs)
NDI display started with PID: 157050
Waiting for stream to establish...

CLEANUP: Stopping NDI display...
+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
~~~~~~~~~~~~~~~ Stack of Thread-1 (run_server) (123364100982464) ~~~~~~~~~~~~~~~
  File "/usr/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
  File "/usr/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
  File "/home/newlevel/.local/lib/python3.12/site-packages/pytest_rerunfailures.py", line 433, in run_server
    conn, _ = self.sock.accept()
  File "/usr/lib/python3.12/socket.py", line 295, in accept
    fd, addr = self._accept()
+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
FAILED
tests/integration/test_display_functional.py::test_display_console_recovery 
============================================================
TESTING CONSOLE RECOVERY
============================================================
Testing with display 0
Initial console bind state: 1
Starting NDI display briefly...
Restoring console...
Final console bind state: 1
✓ Console successfully recovered after NDI display
✓ TTY switching works properly
============================================================
PASSED
tests/integration/test_display_functional.py::test_display_audio_diagnosis 
============================================================
AUDIO DIAGNOSTICS FOR NDI DISPLAY
============================================================
Checking PipeWire status...
✓ PipeWire is running (required)
root      109180  6.2  0.1 114804 22380 ?        S<sl 14:24   0:36 /usr/bin/pipewire
root      109214  6.4  0.2 131568 41156 ?        S<Lsl 14:24   0:37 /usr/bin/pipewire-pulse
root      109221  0.6  0.1 325380 16512 ?        S<sl 14:24   0:03 /usr/bin/wireplumber
root      151591  0.0  0.0   4876  3456 ?        Ss   14:33   0:00 /bin/bash /usr/local/bin/media-bridge-intercom-pipewire

✓ PipeWire sinks available:
32	intercom-speaker	PipeWire	float32le 2ch 48000Hz	RUNNING
57	alsa_output.pci-0000_00_1f.3.hdmi-stereo	PipeWire	s32le 2ch 48000Hz	SUSPENDED
64	alsa_output.usb-CSCTEK_USB_Audio_and_HID_A34004801402-00.analog-stereo	PipeWire	s16le 2ch 48000Hz	RUNNING


Checking PipeWire audio nodes...
PipeWire nodes found:
 		node.name = "Dummy-Driver"
 		node.name = "Freewheel-Driver"
 		node.name = "intercom-speaker"
 		media.class = "Audio/Sink"
 		node.name = "intercom-microphone"
 		media.class = "Audio/Source/Virtual"
 		node.name = "Midi-Bridge"
 		media.class = "Midi/Bridge"
 		node.name = "v4l2_input.pci-0000_00_14.0-usb-0_2_1.0"
 		media.class = "Video/Source"
 		node.name = "alsa_input.usb-CSCTEK_USB_Audio_and_HID_A34004801402-00.mono-fallback"
 		media.class = "Audio/Source"
 		node.name = "alsa_output.usb-CSCTEK_USB_Audio_and_HID_A34004801402-00.analog-stereo"
 		media.class = "Audio/Sink"
 		node.name = "alsa_input.usb-NZXT_NZXT_Signal_HD60_Video_856B012010700273-02.analog-stereo"
 		media.class = "Audio/Source"
 		node.name = "alsa_output.pci-0000_00_1f.3.hdmi-stereo"
 		media.class = "Audio/Sink"
 		node.name = "10"
 		media.class = "Stream/Input/Audio"


Checking active audio clients...
Active PipeWire clients:
35	PipeWire	pipewire
37	PipeWire	wireplumber
38	PipeWire	wireplumber
79	PipeWire	pacat
91	PipeWire	pipewire
106	PipeWire	pipewire
1312	PipeWire	pipewire
1517	PipeWire	chrome
1596	PipeWire	chrome
1640	PipeWire	pactl

⚠ Chrome/Intercom is using audio

Testing with known stream...
Testing audio with display 0...
✗ PipeWire audio initialization failed


============================================================
AUDIO DIAGNOSTIC SUMMARY
Issues found:
  ✗ PipeWire audio initialization failed

Recommendations:
  - Check NDI stream has audio track
  - Check PipeWire is running
  - Check XDG_RUNTIME_DIR is set
============================================================
PASSED
tests/integration/test_display_pipewire_functional.py::test_display_pipewire_audio_display_0 
============================================================
TESTING PIPEWIRE AUDIO ON DISPLAY 0 (HDMI-A-1)
============================================================
⚠ Display 0 has console active, skipping
SKIPPED
tests/integration/test_display_pipewire_functional.py::test_display_pipewire_audio_display_1 
============================================================
TESTING PIPEWIRE AUDIO ON DISPLAY 1 (HDMI-A-2)
============================================================
FAILED
tests/integration/test_display_pipewire_functional.py::test_display_pipewire_audio_display_2 
============================================================
TESTING PIPEWIRE AUDIO ON DISPLAY 2 (HDMI-A-3)
============================================================
FAILED
tests/integration/test_display_pipewire_functional.py::test_display_pipewire_client_registration 
============================================================
TESTING NDI-DISPLAY PIPEWIRE CLIENT REGISTRATION
============================================================
✓ ndi-display registered as PipeWire client
PASSED
tests/integration/test_display_pipewire_functional.py::test_display_audio_continuity 
============================================================
TESTING AUDIO CONTINUITY (20 SECONDS)
============================================================
⚠ Display 2 not connected, skipping continuity test
SKIPPED
tests/integration/test_display_pipewire_functional.py::test_display_hdmi_port_switching 
============================================================
TESTING HDMI PORT SWITCHING
============================================================

Testing display 0...
  ? Display 0 status unclear

Testing display 1...
  ? Display 1 status unclear

Testing display 2...
  ? Display 2 status unclear

✓ HDMI port switching test complete
PASSED
tests/integration/test_display_pipewire_functional.py::test_display_audio_latency 
============================================================
TESTING AUDIO LATENCY
============================================================
PipeWire config:
update: id:0 key:'clock.rate' value:'48000' type:''
update: id:0 key:'clock.quantum' value:'32' type:''

Expected latency: ~5.33ms
✓ Low latency configuration: 0 samples
PASSED
tests/integration/test_display_pipewire_functional.py::test_display_pipewire_hdmi_sink_selection 
============================================================
TESTING HDMI SINK SELECTION
============================================================
Available HDMI sinks:
57	alsa_output.pci-0000_00_1f.3.hdmi-stereo	PipeWire	s32le 2ch 48000Hz	SUSPENDED

⚠ Limited HDMI sinks available
PASSED
tests/performance/test_cpu_usage.py::test_capture_cpu_usage_acceptable PASSED
tests/performance/test_cpu_usage.py::test_system_load_average_acceptable PASSED
tests/performance/test_cpu_usage.py::test_memory_usage_acceptable PASSED
tests/performance/test_cpu_usage.py::test_capture_memory_footprint PASSED
tests/performance/test_cpu_usage.py::test_no_memory_leaks_over_time 